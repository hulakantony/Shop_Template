<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Template Shopping Bag</title>
	<link rel="stylesheet" href="css/shopping_bag.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>

	<div class="main-wrapper">
		<header>
			<div class="content-wrap">
			<div class="logo-nav">
				<div class="logo">
					<a href="home.html"><h1 class = "logo-name">Template</h1></a>
					<a href="home.html"><h1 class = "logo-name-phone">TL</h1></a>
					<ul class="mail-bag">
						<li><a href="">E-mail sing up</a></li>
						<li><img src = "img/home/desctop/bag_ico.png" alt="bag"><a href="" class="shopping-bag">Bag  <span class="header-price">£1 816.85</span><span class="header-count">(4)</span></a></li>
					</ul>
					<div class="menu-phone">
						<a href=""><img class="menu-ico" src="img/home/phone/ico_menu.png" alt=""></a>
					</div>
				</div>
				<nav class="menu-search">
					<ul class="menu">
						<li><a href="women.html">Women</a></li>
						<li><a href="">Men</a></li>
						<li><a href="">Handbags</a></li>
						<li><a href="">Accessories</a></li>
						<li><a href="">Sale</a></li>
						<li><a href="">New Arrivals</a></li>
						<li><a href="">Clearance</a></li>
						<li><a href="">Store Locator</a></li>
						<li><input type="search" placeholder="Style Name" class="search-input">
						<a href="" class="search-icon"><img src="img/home/desctop/search_ico.png" alt=""></a></li>
					</ul>
				</nav>				
				</div>				
			</div>			
		</header>
		<div class="dropdown-menu-wrap">
			<div class="content-wrap">	
				<ul class="dropdown-menu">
					<li><a href="women.html">Women</a></li>
					<li><a href="">Men</a></li>
					<li><a href="">Handbags</a></li>
					<li><a href="">Accessories</a></li>
					<li><a href="">Sale</a></li>
					<li><a href="">New Arrivals</a></li>
					<li><a href="">Clearance</a></li>
					<li><a href="">Store Locator</a></li>
					<li><input type="search" placeholder="Style Name" class="search-input">
						<a href="" class="search-icon"><img src="img/home/desctop/search_ico.png" alt=""></a>
					</li>
				</ul>
			</div>
		</div>
		<main>			
			<section class="shopping-bag-title">
				<div class="content-wrap">
					<h2>Shopping bag</h2>
				</div>
			</section>
			<section class="shopping-bag-items">
				<div class="content-wrap">
				<h2 class="when-empty-bag"></h2>
					<arcicle class="item">
						<div class="photo-price remove">
							<div class="image-wrap">	
								<img src="img/shopping_bag/desctop/item_1.jpg" alt="">
								<div class="hide-photo"></div>
							</div>
							<p class="item-price">£390.25</p>

						</div>
						<div class="item-description remove">
							<p class="item-name">Only Skinny Jeans</p>
							<p class="item-color characteristics">Color: <span class="color">Phillipa wash</span></p>
							<p class="item-size characteristics">Size: <span class="size">UK 17</span></p>
							<p class="item-quantity characteristics">Quantity: <span class='quantity'>1</span></p>
							<a href="" class="remove-button">
								<p>Remove item</p>
							</a>
						</div>						
					</arcicle>
					<arcicle class="item">
						<div class="photo-price remove">
							<div class="image-wrap">	
								<img src="img/shopping_bag/desctop/item_2.jpg" alt="">
								<div class="hide-photo"></div>
							</div>
							<p class="item-price remove">£400.75</p>
						</div>
						<div class="item-description remove">
							<p class="item-name">Paul & Joe Sister Jumper with Neon Trims</p>
							<p class="item-color characteristics">Color: <span class="color">Blue</span></p>
							<p class="item-size characteristics">Size: <span class="size">UK 18</span></p>
							<p class="item-quantity characteristics">Quantity: <span class="quantity">1</span></p>
							<a href="" class="remove-button">
								<p>Remove item</p>
							</a>
						</div>						
					</arcicle>
					<arcicle class="item">
						<div class="photo-price remove">
							<div class="image-wrap">	
								<img src="img/shopping_bag/desctop/item_3.jpg" alt="">
								<div class="hide-photo"></div>
							</div>
							<p class="item-price">£849.50</p>
						</div>
						<div class="item-description remove">
							<p class="item-name">Boyfriend T-Shirt with Bohemian Print</p>
							<p class="item-color characteristics">Color: <span class="color">Black</span></p>
							<p class="item-size characteristics">Size: <span class="size">UK 18</span></p>
							<p class="item-quantity characteristics">Quantity: <span class="quantity">1</span></p>
							<a href="" class="remove-button">
								<p>Remove item</p>
							</a>
						</div>					
					</arcicle>
					<arcicle class="item">
						<div class="photo-price remove">
							<div class="image-wrap">	
								<img src="img/shopping_bag/desctop/item_4.jpg" alt="">
								<div class="hide-photo"></div>
							</div>
							<p class="item-price">£176.35</p>
						</div>
						<div class="item-description remove">
							<p class="item-name">Turtle Neck Jumper in Rib</p>
							<p class="item-color characteristics">Color: <span class="color">Green</span></p>
							<p class="item-size characteristics">Size: <span class="size">UK 19</span></p>
							<p class="item-quantity characteristics">Quantity: <span class="quantity">1</span></p>
							<a href="" class="remove-button">
								<p>Remove item</p>
							</a>							
						</div>						
					</arcicle>
				</div>
			</section>
			<section class="shopping-bag-operations">
				<div class="about-delivery">
					<div class="content-wrap">
						<p>You've qualified for Free UK Next Day Delivery on your order. Don't forget to enter the code nexday at checkout</p>
					</div>
				</div>
				<div class="shopping-bag-action">
					<div class="content-wrap">
						<ul class="bag-items">
							<li class="empty-bag-wrap">
								<a href="" class="empty-bag">
									<p>Empty Bag</p>
								</a>
							</li>
							<li class="button-wrap">
								<button class="buy-now-btn">Buy now</button>
							</li>
							<li class="total-price-wrap">
								<p class="total-text">Total Cost</p>
								<p class="total-price">£1 816.85</p>
							</li>
						</ul>						
					</div>
				</div>
			</section>
			<section class="info-wrap">				
					<div class="phone-wrap-first">
						<div class="content-wrap">
							<div class="links info-block">
								<h3>Quick Links</h3>
								<ul>
									<li><a href="">Store locator</a></li>
									<li><a href="">Gift cards</a></li>
									<li><a href="">Size guide</a></li>
									<li><a href="">About us</a></li>
									<li><a href="">Support</a></li>
								</ul>
							</div>
							<div class="customers-care info-block">
								<h3>Customer Care</h3>
								<ul>
									<li><a href="">Customer service</a></li>
									<li><a href="">Track my order</a></li>
									<li><a href="">Return policy</a></li>
									<li><a href="">Shipping & delivery</a></li>
									<li><a href="">Contact us</a></li>
									<li><a href="">Careers</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="phone-wrap-second">
						<div class="content-wrap">
							<div class="questions info-block">
								<h3>Questions</h3>
								<a href=""><img src="img/home/desctop/twi_ico.png" alt="">Tweet us <span>@template</span></a>
								<div class="social">
									<p class="delivery-about">We have our own delivery service which <br> operates in 23 major European cities. Delivery time - 3-5 days.</p>
									<div class="phone-tablet info-block">
										<h3>Order by phone</h3>
										<span class="phone-number">8-800-409-47-12</span>
									</div>
									<div class="social-icons">
										<ul>
											<li><a href=""><img src="img/home/desctop/fb_ico.png" alt=""></a></li>
											<li><a href=""><img src="img/home/desctop/twi_ico_blue.png" alt=""></a></li>
										</ul>
									</div>
								</div>
							</div>
							<div class="phone info-block">
								<h3>Order by phone</h3>
								<span class="phone-number">8-800-409-47-12</span>
							</div>
						</div>
					</div>
			</section>
		</main>
		<footer class="desctop-tablet">
			<div class="content-wrap">				
					<p class="copyright footer-item">© 2010–2015, The Template Group inc.</p>
					<div class="share footer-item">
						<ul>
							<li class="share-text"><p>Share</p></li>
							<li class="share-count"><p>1 437</p></li>
						</ul>
					</div>
					<div class="footer-nav footer-item">
						<ul>
							<li><a href="">Legal notice</a></li>
							<li><a href="">Privacy policy</a></li>
							<li><a href="">Site map</a></li>
						</ul>
					</div>		
				</div>				
		</footer>
		<footer class="phone-footer">
			<div class="phone-nav-wrap">
				<div class="content-wrap">				
					<div class="footer-nav-phone">
						<ul>
							<li><a href="">Legal notice</a></li>
							<li><a href="">Privacy policy</a></li>
							<li><a href="">Site map</a></li>					
						</ul>
					</div>
					<div class="social-icons-phone">
						<ul>
							<li class="icon"><a href=""><img src="img/home/desctop/fb_ico.png" alt=""></a></li>
							<li class="icon"><a href=""><img src="img/home/desctop/twi_ico_blue.png" alt=""></a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="phone-copyright-wrap">
				<div class="content-wrap">
					<p class="copyright">© 2010–2015, The Template Group inc.</p>
					<div class="share">
						<ul>
							<li class="share-text"><a href=""><p>Share</p></a></li>
							<li class="share-count"><p>1 437</p></li>
						</ul>
					</div>
				</div>
			</div>
		</footer>
	</div>
<script src="js/check.js" async></script>
<script src="js/checkLast.js" async></script>
<script>
	var menuButton = document.querySelector('.menu-phone a');
	var dropMenu = document.querySelector('.dropdown-menu-wrap');
	var menuImage = document.querySelector('.menu-ico');
	var pressed = false;
	menuButton.onclick = function(e){
		dropMenu.classList.toggle('pressed');
		if(dropMenu.classList.contains('pressed')){
			menuImage.src = 'img/home/phone/ico_close.png';
		} else{
			menuImage.src = 'img/home/phone/ico_menu.png';
		}		
		return false;
	}

	function addEvent(evnt, elem, func) {
	   if (elem.addEventListener)  
	      elem.addEventListener(evnt,func,false);
	   else if (elem.attachEvent) { 
	      elem.attachEvent("on"+evnt, func);
	   }
	   else { 
	      elem[evnt] = func;
	   }
	}
/*
	var container = document.querySelector('.shopping-bag-items .content-wrap');
	var totalPrice = document.querySelector('.total-price');
	window.onload = function(){//надо запихнуть в асинхрон скрипт по возможности 
		
		//-----------------------------------------------------
		var newHeaderPrice = localStorage.getItem('headerPrice');
			var newHeaderCount = localStorage.getItem('headerCount');
			if(newHeaderCount !== null || newHeaderPrice !== null){
				var headerPrice = document.querySelector('.header-price');
				var headerCount = document.querySelector('.header-count');
				headerPrice.textContent = newHeaderPrice;
				headerCount.textContent = newHeaderCount;
			} else {
				return;
			}	

				
		totalPrice.textContent = newHeaderPrice;

		//надо запихнуть в асинхронный скрипт-------------------

		addNewItemToBag();	
		localStorage.setItem('shoppingBagHTML', container.innerHTML);
	}
	

	function checkLastChild(){
		var newItems = JSON.parse(localStorage.getItem("itemToBag"));
		if(newItems !== null){
		var lastElement = newItems[newItems.length-1];		
	
		for(var i =0; i<newItems.length-1; i++){
			var item = newItems[i];
			if(lastElement.name === item.name && lastElement.color === item.color && lastElement.size === item.size){				
				item.quantity = +item.quantity + 1;				
				newItems.pop();
				newItems = JSON.stringify(newItems);
				localStorage.setItem('itemToBag', newItems);
				return;
			}
		}	
		}	
	}
	localStorage.setItem('shoppingBagHTML', container.innerHTML);
	checkLastChild();


	function addNewItemToBag(){		
			var newItems = JSON.parse(localStorage.getItem("itemToBag"));
			if(newItems !== null){
			var items = document.querySelectorAll('.item');
			
			for(var i =0; i< newItems.length; i++){	
				var newItem = newItems[i];
				for(var j = 0; j<items.length; j++){
					var item = items[j];
					var name = item.querySelector('.item-name').textContent.toLowerCase();					
					var color = item.querySelector('.color').textContent.toLowerCase();					
					var size = item.querySelector('.size').textContent.toLowerCase();
					
					var quantity = item.querySelector('.quantity').textContent;
					
				if(newItem.name.toLowerCase() == name && newItem.color.toLowerCase() == color && newItem.size.toLowerCase() == size){
					
					quantity.textContent = parseInt(quantity) + 1;
					return ;
				} 							
			}			
			createElement(newItem);
			
		}
	}
	}

		function createElement(itemProps){
			var item = document.createElement('article');
			item.className = 'item';
			item.style.marginTop = '45px';

			var photoPriceDiv = document.createElement('div');
			photoPriceDiv.className = 'photo-price remove';		

			var imageWrap = document.createElement('div');
			imageWrap.className = 'image-wrap';

			var itemImage = document.createElement('img');
			itemImage.src = itemProps.image;
			var hidePhoto = document.createElement('div');
			hidePhoto.className = 'hide-photo';
			
			imageWrap.appendChild(itemImage);
			imageWrap.appendChild(hidePhoto);

			var itemPrice = document.createElement('p');
			itemPrice.className = 'item-price';		
			itemPrice.innerHTML = itemProps.price;

			photoPriceDiv.appendChild(imageWrap);			
			photoPriceDiv.appendChild(itemPrice);

			var itemDescription = document.createElement('div');
			itemDescription.className ='item-description remove';		

			var itemName = document.createElement('p');
			itemName.className ='item-name';
			itemName.innerHTML = itemProps.name;

			var itemColor = document.createElement('p');
			itemColor.className ='item-color characteristics';
			var colorSpan = document.createElement('span');
			colorSpan.className = 'color';
			colorSpan.innerHTML = itemProps.color;		
			itemColor.textContent = 'Color: ';
			itemColor.appendChild(colorSpan);

			var itemSize = document.createElement('p');
			itemSize.className ='item-size characteristics';
			var sizeSpan = document.createElement('span');
			sizeSpan.className = 'size';
			sizeSpan.innerHTML = itemProps.size;	
			itemSize.innerHTML = 'Size: ';
			itemSize.appendChild(sizeSpan);					

			var itemQuantity = document.createElement('p');
			itemQuantity.className ='item-quantity characteristics';
			var quantSpan = document.createElement('span');
			quantSpan.className = 'quantity';
			quantSpan.innerHTML = itemProps.quantity;		
			itemQuantity.innerHTML = 'Quantity: ';
			itemQuantity.appendChild(quantSpan);

			var removeButton = document.createElement('a');
			removeButton.className = 'remove-button';
			removeButton.setAttribute('href', '');		

			var removeButtonText = document.createElement('p');
			removeButtonText.textContent = 'Remove item';

			removeButton.appendChild(removeButtonText);

			itemDescription.appendChild(itemName);
			itemDescription.appendChild(itemColor);
			itemDescription.appendChild(itemSize);
			itemDescription.appendChild(itemQuantity);
			itemDescription.appendChild(removeButton);

			item.appendChild(photoPriceDiv);
			item.appendChild(itemDescription);

			var bagSection = document.querySelector('.shopping-bag-items .content-wrap');
			bagSection.appendChild(item);
		}

	//---------------нажатие на кнопки-------------------------------------------------------------
	var makeBagEmpty = document.querySelector('.empty-bag');
	makeBagEmpty.onclick = function(e){		
		var target = e.target;
		if(target.nodName !== 'A'){
			target = target.parentNode;
		}
		e.preventDefault();

		var catalogItems = document.querySelectorAll('.item');
		for(var i =0; i<catalogItems.length; i++){
			container.removeChild(catalogItems[i]);
		}
		container.innerHTML = '<h2 class="when-empty-bag">Your shopping bag is empty. Use Catalog to add new items</h2>';
		localStorage.removeItem('itemToBag');
		localStorage.setItem('isEmpty', 'true');
		localStorage.setItem('newItemAdded', 'false');
		var headerPrice = document.querySelector('.header-price');
		var headerCount = document.querySelector('.header-count');
		headerPrice.textContent = '';
		headerCount.textContent = '';
		localStorage.setItem('headerPrice', headerPrice.textContent);
		localStorage.setItem('headerCount', headerCount.textContent);
		totalPrice.textContent = '';
		return false;
	}


	var buyNowButton = document.querySelector('.buy-now-btn');
	buyNowButton.onclick = function(e){
		var catalogItems = document.querySelectorAll('.item');
		for(var i =0; i<catalogItems.length; i++){
			container.removeChild(catalogItems[i]);
		}
		container.innerHTML = '<h2 class="when-empty-bag">Thank you for your purchase</h2>';
		localStorage.removeItem('itemToBag');
		localStorage.setItem('isEmpty', 'true');
		localStorage.setItem('newItemAdded', 'false');
		var headerPrice = document.querySelector('.header-price');
		var headerCount = document.querySelector('.header-count');
		headerPrice.textContent = '';
		headerCount.textContent = '';
		localStorage.setItem('headerPrice', headerPrice.textContent);
		localStorage.setItem('headerCount', headerCount.textContent);
		totalPrice.textContent = '';		
	}*/

</script>
<script src="js/script.js"></script>
<script src="js/shopping_bag_remove_item.js"></script>

</body>
</html>